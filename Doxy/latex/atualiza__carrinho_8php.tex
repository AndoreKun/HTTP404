\hypertarget{atualiza__carrinho_8php}{}\doxysection{Referência do Arquivo C\+:/\+Kleyton/\+STI/1.1.Ambiente\+Desen/trabalho\+\_\+adc/atualiza\+\_\+carrinho.php}
\label{atualiza__carrinho_8php}\index{C:/Kleyton/STI/1.1.AmbienteDesen/trabalho\_adc/atualiza\_carrinho.php@{C:/Kleyton/STI/1.1.AmbienteDesen/trabalho\_adc/atualiza\_carrinho.php}}
\doxysubsection*{Variáveis}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a5356327e7656c11ad0adc10aa5ae2f1d}{\$total\+\_\+valor\+\_\+produtos}} = 0
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a6ba80df9ff0fa2e3888484e44fe4537c}{\$num\+\_\+produtos\+\_\+total}} = 0
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a2940535ca142b9bf1c30439ae0230e93}{\$veiculo\+\_\+nome}} = \char`\"{}\char`\"{}
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a3e2468d46c6445a929136c7d6aa2220f}{\$line\+\_\+cost}} = 0
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a3c587448d0951a4c3b7d9f2252158a25}{\$total\+\_\+veiculo}} = 0
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_aa227703fbe30ccdcfc01fac87b500c46}{\$total\+\_\+artigo}} = 0
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a67031208a98bec0eeb17b5dfebb469e4}{\$tipo\+\_\+produto}} = \char`\"{}\char`\"{}
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_ad729c8e27e15e383481fa4f28732983b}{\$artigo\+\_\+nulo}} = FALSE
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a126ff2896bd8f459c45a455174013811}{\$veiculo\+\_\+nulo}} = FALSE
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_a1130b7e84ce8d55718262932d52dabec}{\$voltar\+\_\+para}} = \$\+\_\+\+SESSION\mbox{[}\textquotesingle{}voltar\+\_\+para\textquotesingle{}\mbox{]}
\item 
\mbox{\hyperlink{atualiza__carrinho_8php_af6cd571891ba5196ecc576df52c93474}{if}} (isset( \$\+\_\+\+SESSION\mbox{[} \textquotesingle{}produtos\+\_\+veiculos\textquotesingle{}\mbox{]})$\vert$$\vert$isset( \$\+\_\+\+SESSION\mbox{[} \textquotesingle{}produtos\+\_\+artigos\textquotesingle{}\mbox{]})) = \mbox{\hyperlink{product-details_8php_a5029c4d08bf53127c9182988e34ebac5}{feedback}}(2, \char`\"{}veiculo\char`\"{})
\end{DoxyCompactItemize}


\doxysubsection{Variáveis}
\mbox{\Hypertarget{atualiza__carrinho_8php_ad729c8e27e15e383481fa4f28732983b}\label{atualiza__carrinho_8php_ad729c8e27e15e383481fa4f28732983b}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$artigo\_nulo@{\$artigo\_nulo}}
\index{\$artigo\_nulo@{\$artigo\_nulo}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$artigo\_nulo}{$artigo\_nulo}}
{\footnotesize\ttfamily \$artigo\+\_\+nulo = FALSE}

Torna-\/se Verdadeiro caso não existam artigos no array dos artigos do carrinho 

Definição na linha 26 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a3e2468d46c6445a929136c7d6aa2220f}\label{atualiza__carrinho_8php_a3e2468d46c6445a929136c7d6aa2220f}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$line\_cost@{\$line\_cost}}
\index{\$line\_cost@{\$line\_cost}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$line\_cost}{$line\_cost}}
{\footnotesize\ttfamily \$line\+\_\+cost = 0}

Custo total de um produto 

Definição na linha 18 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a6ba80df9ff0fa2e3888484e44fe4537c}\label{atualiza__carrinho_8php_a6ba80df9ff0fa2e3888484e44fe4537c}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$num\_produtos\_total@{\$num\_produtos\_total}}
\index{\$num\_produtos\_total@{\$num\_produtos\_total}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$num\_produtos\_total}{$num\_produtos\_total}}
{\footnotesize\ttfamily \$num\+\_\+produtos\+\_\+total = 0}

Número Total de Produtos 

Definição na linha 14 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a67031208a98bec0eeb17b5dfebb469e4}\label{atualiza__carrinho_8php_a67031208a98bec0eeb17b5dfebb469e4}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$tipo\_produto@{\$tipo\_produto}}
\index{\$tipo\_produto@{\$tipo\_produto}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$tipo\_produto}{$tipo\_produto}}
{\footnotesize\ttfamily \$tipo\+\_\+produto = \char`\"{}\char`\"{}}

Tipo de produto(Veiculo/\+Artigo) 

Definição na linha 24 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_aa227703fbe30ccdcfc01fac87b500c46}\label{atualiza__carrinho_8php_aa227703fbe30ccdcfc01fac87b500c46}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$total\_artigo@{\$total\_artigo}}
\index{\$total\_artigo@{\$total\_artigo}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$total\_artigo}{$total\_artigo}}
{\footnotesize\ttfamily \$total\+\_\+artigo = 0}

Custo Total dos Artigos 

Definição na linha 22 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a5356327e7656c11ad0adc10aa5ae2f1d}\label{atualiza__carrinho_8php_a5356327e7656c11ad0adc10aa5ae2f1d}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$total\_valor\_produtos@{\$total\_valor\_produtos}}
\index{\$total\_valor\_produtos@{\$total\_valor\_produtos}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$total\_valor\_produtos}{$total\_valor\_produtos}}
{\footnotesize\ttfamily \$total\+\_\+valor\+\_\+produtos = 0}

Valor Total de Produtos 

Definição na linha 12 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a3c587448d0951a4c3b7d9f2252158a25}\label{atualiza__carrinho_8php_a3c587448d0951a4c3b7d9f2252158a25}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$total\_veiculo@{\$total\_veiculo}}
\index{\$total\_veiculo@{\$total\_veiculo}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$total\_veiculo}{$total\_veiculo}}
{\footnotesize\ttfamily \$total\+\_\+veiculo = 0}

Custo Total dos Veículos 

Definição na linha 20 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a2940535ca142b9bf1c30439ae0230e93}\label{atualiza__carrinho_8php_a2940535ca142b9bf1c30439ae0230e93}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$veiculo\_nome@{\$veiculo\_nome}}
\index{\$veiculo\_nome@{\$veiculo\_nome}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$veiculo\_nome}{$veiculo\_nome}}
{\footnotesize\ttfamily \$veiculo\+\_\+nome = \char`\"{}\char`\"{}}

Designação do Veículo 

Definição na linha 16 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a126ff2896bd8f459c45a455174013811}\label{atualiza__carrinho_8php_a126ff2896bd8f459c45a455174013811}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$veiculo\_nulo@{\$veiculo\_nulo}}
\index{\$veiculo\_nulo@{\$veiculo\_nulo}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$veiculo\_nulo}{$veiculo\_nulo}}
{\footnotesize\ttfamily \$veiculo\+\_\+nulo = FALSE}

Torna-\/se Verdadeiro caso não existam veiculos no array dos veiculos do carrinho 

Definição na linha 28 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_a1130b7e84ce8d55718262932d52dabec}\label{atualiza__carrinho_8php_a1130b7e84ce8d55718262932d52dabec}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!\$voltar\_para@{\$voltar\_para}}
\index{\$voltar\_para@{\$voltar\_para}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{\$voltar\_para}{$voltar\_para}}
{\footnotesize\ttfamily \$voltar\+\_\+para = \$\+\_\+\+SESSION\mbox{[}\textquotesingle{}voltar\+\_\+para\textquotesingle{}\mbox{]}}

Recebe voltar\+\_\+para, logo que será necessário redirecionar de volta à product\+\_\+details 

Definição na linha 30 do arquivo atualiza\+\_\+carrinho.\+php.

\mbox{\Hypertarget{atualiza__carrinho_8php_af6cd571891ba5196ecc576df52c93474}\label{atualiza__carrinho_8php_af6cd571891ba5196ecc576df52c93474}} 
\index{atualiza\_carrinho.php@{atualiza\_carrinho.php}!if@{if}}
\index{if@{if}!atualiza\_carrinho.php@{atualiza\_carrinho.php}}
\doxysubsubsection{\texorpdfstring{if}{if}}
{\footnotesize\ttfamily if (\begin{DoxyParamCaption}\item[{isset( \$\+\_\+\+SESSION\mbox{[} \textquotesingle{}produtos\+\_\+veiculos\textquotesingle{}\mbox{]})$\vert$$\vert$isset( \$\+\_\+\+SESSION\mbox{[} \textquotesingle{}produtos\+\_\+artigos\textquotesingle{}\mbox{]})}]{ }\end{DoxyParamCaption}) = \mbox{\hyperlink{product-details_8php_a5029c4d08bf53127c9182988e34ebac5}{feedback}}(2, \char`\"{}veiculo\char`\"{})}

Apenas inicia o processo se um veiculo/artigo tiver sido adicionado ao carrinho através da loja Redireciona Para product\+\_\+details na posição da página do produto adicionado

A função Retorna o botão de remover caso o produto existir no carrinho Espaço para alinhar texto e botões Se o id que foi enviado for igual ao id do veiculo que foi mandado, imprime uma mensagem(produtoa adicionado/removido do carrinho) if(isset(\$\+\_\+\+SESSION\mbox{[}\textquotesingle{}produtos\+\_\+artigos\textquotesingle{}\mbox{]}))\+: Se um artigo foi adicionado ao carrinho, resgata id\+\_\+artigo definido na página carrinho\+\_\+artigos

if(isset(\$\+\_\+\+SESSION\mbox{[}\textquotesingle{}produtos\+\_\+veiculos\textquotesingle{}\mbox{]}))\+: Se um veiculo foi adicionado ao carrinho, resgata id\+\_\+veiculo definido na página carrinho\+\_\+artigos

\$produtos\+: Array dos Produtos do carrinho

\$prod\+\_\+veiculos\+\_\+antigos\+: Array dos produtos já adicionados ao carrinho previamente

if(\$tipo\+\_\+produto == \char`\"{}veiculo\char`\"{})\+: Caso o tipo do produto ser um veiculo, conecta à base de dados e empurra o resultado para o array dos produtos

if(isset(\$\+\_\+\+SESSION\mbox{[}\textquotesingle{}carrinho\+\_\+veiculos\textquotesingle{}\mbox{]}\mbox{[}\$id\+\_\+veiculo\mbox{]}\+: Condição que não permite que sejam definidos produtos que não tenham sido adicionados em carrinho.\+php(ou que foram removidos), Caso não houverem produtos, define veiculo\+\_\+nulo como verdadeiro

\$consulta\+: Define o query da consulta

\$pass\+\_\+users, \$cargo\+: Define os dados para logar na base de dados

chama o ficheiro para conectar à base de dados

foreach(\$dados as \$linha)\+: Ciclo que extrai para variáveis o resultado da consulta

\$modelo = \$linha\mbox{[}\textquotesingle{}modelo\textquotesingle{}\mbox{]}\+: Define o Modelo

\$marca = \$linha\mbox{[}\textquotesingle{}marca\textquotesingle{}\mbox{]}\+: Define a Marca

\$preco\+\_\+veiculo = \$linha\mbox{[}\textquotesingle{}preco\textquotesingle{}\mbox{]}\+: Define o preço

if(isset(\$\+\_\+\+SESSION\mbox{[}\textquotesingle{}produtos\textquotesingle{}\mbox{]}\mbox{[}\textquotesingle{}produtos\textquotesingle{}\mbox{]}\+: Caso já existam produtos no carrinho, se o novo produto for igual a um dos que já existem, redefine as posições do produto para o novo

if(\$sem\+\_\+produtos == TRUE)\+: Caso não haja produtos no carrinho, ou não houverem produtos repetidos, empurra os valores para o array dos produtos

if(\$tipo\+\_\+produto == \char`\"{}veiculo\char`\"{})\+: Caso um artigo tiver sido adicionado, repete o mesmo processo que o dos veículos, senão define artigo\+\_\+nulo como verdadeiro

if(\$veiculo\+\_\+nulo == TRUE)\+: Faz uma conexão à base de dados, similar à feita para definir veículos, para buscar o nome do veículo nulo apartir do seu id. Com esse dado, procura no array de produtos o nome obtido e remove-\/o do array, em conjunto com sua quantidade e preço

if(\$artigo\+\_\+nulo == TRUE)\+: Repete o mesmo processo feito aos veículos, só que desta vez para os artigoss

\$\+\_\+\+SESSION\mbox{[}\textquotesingle{}produtos\textquotesingle{}\mbox{]}\mbox{[}\textquotesingle{}produtos\textquotesingle{}\mbox{]}\+: Array associativo que guarda todos os produtos do carrinho

if(count(\$produtos) == 0)\+: Caso o numero de produtos seja igual a zero, significa que não há produtos, logo remove o array associativo dos produtos

Definição na linha 33 do arquivo atualiza\+\_\+carrinho.\+php.

